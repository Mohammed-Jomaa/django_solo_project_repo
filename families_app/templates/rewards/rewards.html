{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <title>Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² Ùˆ Ø§Ù„Ù†Ù‚Ø§Ø·</title>
  <link href="{% static 'bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'CSS/style.css' %}" rel="stylesheet">
  <style>
    .reward-image-container {
      width: 100%;
      height: 200px;
      overflow: hidden;
      border-radius: 10px;
    }

    .reward-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 10px;
    }
  </style>
</head>

<body>
  <header>
    <nav class="navbar navbar-light bg-white shadow-sm">
      <div class="container d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center gap-2">
          <img src="{% static 'images/logo.png' %}" width="40" height="40" />
          <span class="fw-bold brand-orange fs-5">Ø¨ÙÙ†Ø§Ø© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„</span>
        </div>
        <a href="{% url 'logout' %}" class="btn btn-orange">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a>
      </div>
    </nav>
  </header>

  <main class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h3 class="fw-bold">ğŸ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² {{ family.name }}</h3>
      <a href="{% url 'create_reward' family.id %}" class="btn btn-orange">â• Ø¥Ø¶Ø§ÙØ© Ø¬Ø§Ø¦Ø²Ø©</a>
    </div>

    {% if rewards %}
    <div class="row g-4">
      {% for reward in rewards %}
      <div class="col-md-4">
        <div class="card shadow-sm h-100 text-center p-3">
          <div class="reward-image-container mb-3">
            {% if reward.image %}
              <img src="{{ reward.image.url }}" alt="ØµÙˆØ±Ø© Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©" class="reward-image">
            {% else %}
              <img src="{% static 'images/gift.png' %}" alt="ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©" class="reward-image">
            {% endif %}
          </div>
          <h5 class="fw-bold">{{ reward.title }}</h5>
          <p class="mb-2">ØªÙƒÙ„ÙØ© Ø§Ù„Ù†Ù‚Ø§Ø·: <strong>{{ reward.points_cost }}</strong></p>
          <form action="{% url 'delete_reward' reward.id %}" method="post"
                        onsubmit="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©');">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger mb-2">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©</button>
                    </form>

        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <p class="text-muted text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬ÙˆØ§Ø¦Ø² Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯.</p>
    {% endif %}

    <div class="text-center mt-4">
      <a href="{% url 'manage_family' family.id %}" class="btn btn-outline-orange">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</a>
    </div>
  </main>

  <script src="{% static 'bootstrap/js/bootstrap.bundle.min.js' %}"></script>
</body>

</html>
